<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vector Addition Calculator</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        :root {
            --bg: #0f172a;
            --card-bg: #0b1120;
            --accent: #3b82f6;
            --accent-soft: #1d4ed8;
            --border-subtle: #1e293b;
            --text-main: #e5e7eb;
            --text-muted: #9ca3af;
        }

        * { box-sizing: border-box; }

        html, body { height: 100%; }

        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, Blinkmacsystemfont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #1e293b 0, #020617 45%, #000 100%);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: stretch;
        }

        .page-wrapper {
            max-width: 1200px;
            width: 100%;
            padding: 24px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .page-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 4px;
            text-align: left;
        }

        .page-subtitle {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 16px;
            text-align: left;
        }

        .app-container {
            display: flex;
            gap: 20px;
            flex: 1;
            min-height: 0;
        }

        .panel {
            border-radius: 9px;
            border: 1px solid var(--border-subtle);
            box-shadow: 0 9px 22px rgba(15, 23, 42, 0.45);
            padding: 18px 20px 20px 20px;
        }

        .left-panel {
            flex: 1;
            max-width: 360px;
            background: var(--card-bg);
            display: flex;
            flex-direction: column;
        }

        .right-panel {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .panel-header {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--accent);
        }

        .panel-description {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 14px;
        }

        .vectors-row {
            display: flex;
            gap: 16px;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .inputs-block { flex: 1; }

        .vector-column {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .vector-header {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .component-line {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .component-line span {
            min-width: 30px;
            font-size: 13px;
            color: var(--text-muted);
        }

        input {
            padding: 6px 8px;
            width: 80px;
            font-size: 13px;
            color: var(--text-main);
            background: #020617;
            border: 1px solid #1e293b;
            border-radius: 14px;
            outline: none;
            transition: border-color 0.18s ease, box-shadow 0.18s ease;
        }

        input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.5);
        }

        button {
            margin-top: 6px;
            padding: 9px 14px;
            font-size: 13px;
            font-weight: 500;
            color: #e5e7eb;
            background: linear-gradient(135deg, var(--accent), var(--accent-soft));
            border: none;
            border-radius: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2.5px 6px rgba(37, 99, 235, 0.11);
            transition: all 0.12s ease;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 3.5px 8px rgba(37, 99, 235, 0.15);
        }

        button span.icon {
            font-size: 14px;
            color: #ffffff;
        }

        .resultant-section {
            margin-top: 16px;
            padding-top: 10px;
            border-top: 1px solid rgba(148, 163, 184, 0.25);
        }

        .resultant-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--accent);
        }

        .resultant-formula {
            font-size: 12px;
            color: var(--text-muted);
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .resultant-values {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .result-item {
            font-size: 13px;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 8px;
            border-left: 3px solid;
            background: rgba(255, 255, 255, 0.05);
        }

        /* UPDATED: Purple for R components (matches graph), others unchanged */
        .result-components { border-color: #a855f7; color: var(--text-main); }
        .result-magnitude { border-color: #10b981; color: var(--text-main); }
        .result-angle { border-color: #f59e0b; color: var(--text-main); }

        .graph-panel {
            background: #ffffff;
            border-radius: 9px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 7px 20px rgba(15, 23, 42, 0.18);
            padding: 14px 16px;
            flex: 1;
            min-height: 0;
            display: flex;
        }

        #graph { width: 100%; height: 100%; }

        .legend-bar {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 10px 14px;
            border-radius: 14px;
            background: rgba(15, 23, 42, 0.75);
            border: 1px solid var(--border-subtle);
            font-size: 12px;
            color: var(--text-muted);
            box-shadow: 0 4px 10px rgba(15, 23, 42, 0.25);
        }

        .legend-item { display: flex; align-items: center; gap: 6px; }

        .legend-swatch {
            width: 16px;
            height: 4px;
            border-radius: 999px;
        }

        .swatch-a { background: #3b82f6; }
        .swatch-b { background: #f97373; }
        .swatch-r { background: #a855f7; }

        @media (max-width: 900px) {
            .app-container { flex-direction: column; }
            .left-panel { max-width: 100%; }
            .vectors-row { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="page-title">Vector Addition Visualizer</div>
        <div class="page-subtitle">
            Explore how two 2D vectors combine into a resultant vector on an interactive graph.
        </div>

        <div class="app-container">
            <div class="panel left-panel">
                <div class="panel-header">Vector inputs</div>
                <div class="panel-description">
                    Enter the x and y components for each vector. Press <strong>Add vectors</strong> to update the graph.
                </div>

                <div class="vectors-row">
                    <div class="inputs-block">
                        <div class="vector-column">
                            <div class="vector-header">Vector A</div>
                            <div class="component-line">
                                <span>x =</span>
                                <input type="number" id="a_x" value="12.5" step="0.1">
                            </div>
                            <div class="component-line">
                                <span>y =</span>
                                <input type="number" id="a_y" value="25" step="0.1">
                            </div>
                        </div>
                    </div>

                    <div class="inputs-block">
                        <div class="vector-column">
                            <div class="vector-header">Vector B</div>
                            <div class="component-line">
                                <span>x =</span>
                                <input type="number" id="b_x" value="6" step="0.1">
                            </div>
                            <div class="component-line">
                                <span>y =</span>
                                <input type="number" id="b_y" value="40" step="0.1">
                            </div>
                        </div>
                    </div>
                </div>

                <button onclick="addVectors()">
                    <span class="icon">➕</span>
                    <span>Add vectors</span>
                </button>

                <div class="resultant-section">
                    <div class="resultant-title">Resultant vector</div>
                    <div class="resultant-formula">
                        Component form:<br>
                        R = A + B = (A<sub>x</sub> + B<sub>x</sub>, A<sub>y</sub> + B<sub>y</sub>)<br><br>
                        Magnitude (Pythagorean theorem):<br>
                        |R| = √[(A<sub>x</sub> + B<sub>x</sub>)² + (A<sub>y</sub> + B<sub>y</sub>)²]<br><br>
                        Direction (angle from positive x-axis):<br>
                        θ = tan⁻¹[(A<sub>y</sub> + B<sub>y</sub>)/(A<sub>x</sub> + B<sub>x</sub>)] in degrees
                    </div>
                    
                    <div class="resultant-values" id="resultant-display">
                        <div class="result-item result-components">
                            R = (0.00, 0.00)
                        </div>
                        <div class="result-item result-magnitude">
                            |R| = 0.00
                        </div>
                        <div class="result-item result-angle">
                            θ = 0.0°
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="graph-panel">
                    <div id="graph"></div>
                </div>

                <div class="legend-bar">
                    <div class="legend-item">
                        <div class="legend-swatch swatch-a"></div>
                        <span>Vector A</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-swatch swatch-b"></div>
                        <span>Vector B</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-swatch swatch-r"></div>
                        <span>Resultant R = A + B</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function addVectors() {
            const a_x = parseFloat(document.getElementById('a_x').value) || 0;
            const a_y = parseFloat(document.getElementById('a_y').value) || 0;
            const b_x = parseFloat(document.getElementById('b_x').value) || 0;
            const b_y = parseFloat(document.getElementById('b_y').value) || 0;

            const sum_x = a_x + b_x;
            const sum_y = a_y + b_y;
            const magR = Math.sqrt(sum_x * sum_x + sum_y * sum_y);
            
            let thetaRad, thetaDeg;
            if (sum_x === 0) {
                thetaRad = sum_y >= 0 ? Math.PI / 2 : -Math.PI / 2;
            } else {
                thetaRad = Math.atan(sum_y / sum_x);
            }
            if (sum_x < 0) {
                thetaRad += Math.PI;
            } else if (sum_y < 0 && sum_x > 0) {
                thetaRad += 2 * Math.PI;
            }
            thetaDeg = (thetaRad * 180 / Math.PI + 360) % 360;

            const display = document.getElementById('resultant-display');
            display.innerHTML = `
                <div class="result-item result-components">
                    R = (${sum_x.toFixed(2)}, ${sum_y.toFixed(2)})
                </div>
                <div class="result-item result-magnitude">
                    |R| = ${magR.toFixed(2)}
                </div>
                <div class="result-item result-angle">
                    θ = ${thetaDeg.toFixed(1)}°
                </div>
            `;

            drawPlotlyVectors(a_x, a_y, b_x, b_y, sum_x, sum_y, thetaDeg, thetaRad);
        }

        function drawPlotlyVectors(a_x, a_y, b_x, b_y, sum_x, sum_y, thetaDeg, thetaRad) {
            const values = [0, a_x, a_y, b_x, b_y, sum_x, sum_y];
            const maxAbs = Math.max(...values.map(Math.abs), 5);
            const margin = 1;
            const axisMax = maxAbs + margin;
            const axisMin = -axisMax;

            const traceA = {
                x: [0, a_x], y: [0, a_y],
                mode: "lines+markers",
                line: { color: "#3b82f6", width: 4 },
                marker: { size: 6, color: "#3b82f6" },
                hovertemplate: "A = (%{x:.1f}, %{y:.1f})<extra></extra>"
            };

            const traceB = {
                x: [0, b_x], y: [0, b_y],
                mode: "lines+markers",
                line: { color: "#f97373", width: 4 },
                marker: { size: 6, color: "#f97373" },
                hovertemplate: "B = (%{x:.1f}, %{y:.1f})<extra></extra>"
            };

            const traceR = {
                x: [0, sum_x], y: [0, sum_y],
                mode: "lines+markers",
                line: { color: "#a855f7", width: 5 },
                marker: { size: 7, color: "#a855f7" },
                hovertemplate: `R = (%{x:.1f}, %{y:.1f}) | θ = ${thetaDeg.toFixed(1)}°<extra></extra>`
            };

            const traceParaAtoB = {
                x: [a_x, sum_x], y: [a_y, sum_y],
                mode: "lines",
                line: { color: "#8bbef9", width: 4, dash: "dash" },
                showlegend: false, hovertemplate: ""
            };

            const traceParaBtoA = {
                x: [b_x, sum_x], y: [b_y, sum_y],
                mode: "lines",
                line: { color: "#fda4a4", width: 4, dash: "dash" },
                showlegend: false, hovertemplate: ""
            };

            // UPDATED: Orange angle arc (matches result border)
            const arcRadius = Math.min(3.5, axisMax * 0.18);
            const numPoints = 50;
            const arcX = [];
            const arcY = [];
            for (let i = 0; i <= numPoints; i++) {
                const angle = (thetaRad * i) / numPoints;
                arcX.push(arcRadius * Math.cos(angle));
                arcY.push(arcRadius * Math.sin(angle));
            }

            const traceAngle = {
                x: arcX,
                y: arcY,
                mode: "lines",
                line: { 
                    color: "#f59e0b",  // Orange (matches result-angle border)
                    width: 3.5,
                    shape: "spline"
                },
                showlegend: false,
                hovertemplate: `θ = ${thetaDeg.toFixed(1)}°<extra></extra>`
            };

            const layout = {
                paper_bgcolor: "#ffffff",
                plot_bgcolor: "#ffffff",
                margin: { l: 40, r: 10, t: 20, b: 40 },
                xaxis: {
                    title: "Vector A", zeroline: true, zerolinewidth: 2,
                    zerolinecolor: "#111827", range: [axisMin, axisMax],
                    gridcolor: "#e5e7eb", linecolor: "#111827", mirror: true
                },
                yaxis: {
                    title: "Vector B", zeroline: true, zerolinewidth: 2,
                    zerolinecolor: "#111827", range: [axisMin, axisMax],
                    gridcolor: "#e5e7eb", linecolor: "#111827", mirror: true,
                    scaleanchor: "x", scaleratio: 1
                },
                showlegend: false
            };

            Plotly.newPlot("graph", [traceA, traceB, traceR, traceParaAtoB, traceParaBtoA, traceAngle], layout, {
                responsive: true, displaylogo: false, scrollZoom: true
            });
        }

        addVectors();
    </script>
</body>
</html>
